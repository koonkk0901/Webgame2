<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§€é³¥å°åµæ¢ æŠ€èƒ½è§£é–éä¸‰é—œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@400;700&display=swap');

        body {
            font-family: 'Noto Sans HK', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #333; /* è¢å¹•å¤–æ¡†åº•è‰² */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* å¼·åˆ¶ 4:3 æ¯”ä¾‹çš„éŠæˆ²å®¹å™¨ */
        #game-wrapper {
            aspect-ratio: 4 / 3;
            width: 100%;
            max-width: calc(100vh * (4 / 3));
            max-height: 100vh;
            background-color: #d4edda; /* é è¨­ç²‰ç¶ è‰² */
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            overflow: hidden;
            transition: background-color 0.3s;
        }

        /* æ¨™é¡Œå€åŸŸ */
        .header-area {
            height: 20%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 1%;
        }

        /* éŠæˆ²ä¸»é«”å€åŸŸ */
        .main-game-area {
            height: 72%;
            display: flex;
            padding: 0 2%;
            gap: 2%;
        }

        /* åº•éƒ¨è¨Šæ¯å€åŸŸ */
        .footer-area {
            height: 8%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(1rem, 2.5vmin, 2rem);
        }

        /* å·¦æ–¹ 3x3 åœ–ç‰‡ç¶²æ ¼ */
        .grid-left {
            flex: 6;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 2%;
            height: 100%;
        }

        /* å³æ–¹ 9 æ ¼åå­— */
        .list-right {
            flex: 4;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            gap: 2%;
        }

        /* åœ–ç‰‡èˆ‡æŒ‰éˆ•å…±ç”¨æ¨£å¼ */
        .game-item {
            border: 4px solid white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            background-color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .game-item:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }

        /* åœ–ç‰‡æ ¼ç‰¹åˆ¥è¨­å®š */
        .img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }

        /* åå­—æ ¼ç‰¹åˆ¥è¨­å®š */
        .name-box {
            flex: 1;
            font-size: clamp(1rem, 2.5vmin, 1.8rem);
            font-weight: bold;
            color: #333;
        }

        /* ç‹€æ…‹æ¨£å¼ */
        .selected {
            border-color: #3b82f6 !important; /* è—è‰²é¸å–æ¡† */
            transform: scale(1.05) !important;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.6) !important;
        }

        .matched {
            border-color: #22c55e !important; /* ç¶ è‰²æˆåŠŸæ¡† */
            opacity: 0.5;
            pointer-events: none;
            filter: grayscale(50%);
        }

        /* è§£é–æˆåŠŸé é¢ */
        #success-page {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f8d7da; /* ç²‰ç´…è‰²åº•è‰² */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .btn-next {
            margin-top: 5vh;
            padding: 2vh 4vw;
            font-size: clamp(1.5rem, 4vmin, 3rem);
            background-color: #ff6b81;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255, 107, 129, 0.4);
            transition: all 0.2s;
        }

        .btn-next:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 107, 129, 0.6);
        }
        .btn-next:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>

    <div id="game-wrapper">
        <!-- ç¬¬ä¸€é é¢ï¼šéŠæˆ²ç•«é¢ -->
        <div id="game-page" style="height: 100%; width: 100%;">
            <!-- æ¨™é¡Œ -->
            <div class="header-area">
                <div style="font-size: clamp(1rem, 2.5vmin, 1.5rem); font-weight: bold; color: #2c3e50;">2025-2026 ç§‘å­¸ç§‘ é¦™æ¸¯çœŸå…‰ä¸­å­¸é™„å±¬å°å­¸æš¨å¹¼ç¨šåœ’</div>
                <div style="font-size: clamp(1.2rem, 3.5vmin, 2.2rem); font-weight: bold; color: #1a252f; margin: 0.5vh 0;">ğŸ•µï¸â€â™‚ï¸ è§€é³¥å°åµæ¢ æŠ€èƒ½è§£é–éä¸‰é—œ ğŸ•µï¸â€â™€ï¸</div>
                <div style="font-size: clamp(1rem, 3vmin, 1.8rem); font-weight: bold; color: #e67e22;">ğŸ‘€ è¦–è¦ºæŠ€èƒ½è§£é– ğŸ”“</div>
            </div>

            <!-- éŠæˆ²ä¸»é«” -->
            <div class="main-game-area">
                <!-- å·¦æ–¹åœ–ç‰‡ç¶²æ ¼ -->
                <div class="grid-left" id="image-grid"></div>
                <!-- å³æ–¹åå­—åˆ—è¡¨ -->
                <div class="list-right" id="name-list"></div>
            </div>

            <!-- åº•éƒ¨è¨Šæ¯ -->
            <div class="footer-area">
                <span id="error-message" style="color: red; font-weight: bold; opacity: 0; transition: opacity 0.3s;">è§€é³¥å°åµæ¢: è«‹å†é…å°å¤šä¸€æ¬¡</span>
            </div>
        </div>

        <!-- ç¬¬äºŒé é¢ï¼šè§£é–æˆåŠŸç•«é¢ -->
        <div id="success-page">
            <div style="font-size: clamp(2rem, 6vmin, 4rem); font-weight: bold; color: #d63031; text-align: center; margin-bottom: 2vh;">
                è§€é³¥å°åµæ¢:<br>è¦–è¦ºæŠ€èƒ½è§£é–æˆåŠŸ ğŸ‰âœ¨ğŸ™Œ
            </div>
            <button class="btn-next" onclick="nextDetective()">ä¸‹ä¸€ä½è§€é³¥å°åµæ¢</button>
        </div>
    </div>

    <!-- æ‹æ‰‹éŸ³æ•ˆ -->
    <audio id="clap-sound" src="https://raw.githubusercontent.com/koonkk0901/Game/main/%E6%8B%8D%E6%89%8B.mp3"></audio>

    <script>
        // é³¥é¡è³‡æ–™åº« (å°‡ GitHub çš„ blob è½‰ç‚º raw ä»¥ä¾¿ç›´æ¥è®€å–åœ–ç‰‡)
        const birdsData = [
            { id: 1, name: 'ç é ¸æ–‘é³©', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E7%8F%A0%E9%A0%B8%E6%96%91%E9%B3%A9.jpg' },
            { id: 2, name: 'ç´…è€³éµ¯', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E7%B4%85%E8%80%B3%E9%B5%AF.jpg' },
            { id: 3, name: 'å°è‘µèŠ±é³³é ­é¸šéµ¡', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E5%B0%8F%E8%91%B5%E8%8A%B1%E9%B3%B3%E9%A0%AD%E9%B8%9A%E9%B5%A1.jpg' },
            { id: 4, name: 'å™ªéµ‘', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E5%99%AA%E9%B5%91.jpg' },
            { id: 5, name: 'éº»é›€', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E9%BA%BB%E9%9B%80.jpg' },
            { id: 6, name: 'é»‘è€³é³¶ (éº»é·¹)', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E9%BB%91%E8%80%B3%E9%B3%B6.jpg' },
            { id: 7, name: 'ç´…å˜´è—éµ²', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E7%B4%85%E5%98%B4%E8%97%8D%E9%B5%B2.jpg' },
            { id: 8, name: 'é»‘è‡‰çµé·º', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E9%BB%91%E8%87%89%E7%90%B5%E9%B7%BA.jpg' },
            { id: 9, name: 'å°ç™½é·º', img: 'https://raw.githubusercontent.com/koonkk0901/Game/main/%E5%B0%8F%E7%99%BD%E9%B7%BA.jpg' } // æ¨æ¸¬çš„å°ç™½é·ºé€£çµ
        ];

        let selectedImageId = null;
        let selectedNameId = null;
        let matchedPairs = 0;

        const clapSound = document.getElementById('clap-sound');

        // æ‰“äº‚é™£åˆ—é †åºçš„å‡½æ•¸
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // åˆå§‹åŒ–/é‡ç½®éŠæˆ²
        function initGame() {
            matchedPairs = 0;
            selectedImageId = null;
            selectedNameId = null;
            document.getElementById('error-message').style.opacity = '0';

            const imageGrid = document.getElementById('image-grid');
            const nameList = document.getElementById('name-list');
            
            imageGrid.innerHTML = '';
            nameList.innerHTML = '';

            // æº–å‚™æ‰“äº‚çš„åœ–ç‰‡å’Œåå­—
            const shuffledImages = shuffleArray([...birdsData]);
            const shuffledNames = shuffleArray([...birdsData]);

            // æ¸²æŸ“å·¦æ–¹åœ–ç‰‡æ ¼
            shuffledImages.forEach(bird => {
                const box = document.createElement('div');
                box.className = 'game-item img-box';
                box.dataset.id = bird.id;
                box.onclick = () => selectItem('image', bird.id, box);
                
                const img = document.createElement('img');
                img.src = bird.img;
                img.alt = "Bird Image";
                // å¦‚æœåœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼Œé¡¯ç¤ºå‚™ç”¨æ–‡å­—
                img.onerror = () => { img.style.display = 'none'; box.innerHTML = '<span style="color:#999">åœ–ç‰‡è¼‰å…¥ä¸­...</span>'; };
                
                box.appendChild(img);
                imageGrid.appendChild(box);
            });

            // æ¸²æŸ“å³æ–¹åå­—æ ¼
            shuffledNames.forEach(bird => {
                const box = document.createElement('div');
                box.className = 'game-item name-box';
                box.dataset.id = bird.id;
                box.innerText = bird.name;
                box.onclick = () => selectItem('name', bird.id, box);
                nameList.appendChild(box);
            });
        }

        // è™•ç†é»æ“Šé¸å–
        function selectItem(type, id, element) {
            // å¦‚æœå·²ç¶“é…å°éï¼Œä¸ä½œåæ‡‰
            if (element.classList.contains('matched')) return;

            // æ¸…é™¤ä¹‹å‰çš„éŒ¯èª¤è¨Šæ¯
            document.getElementById('error-message').style.opacity = '0';

            if (type === 'image') {
                // ç§»é™¤å…¶ä»–åœ–ç‰‡çš„é¸å–ç‹€æ…‹
                document.querySelectorAll('.img-box').forEach(el => el.classList.remove('selected'));
                selectedImageId = id;
            } else {
                // ç§»é™¤å…¶ä»–åå­—çš„é¸å–ç‹€æ…‹
                document.querySelectorAll('.name-box').forEach(el => el.classList.remove('selected'));
                selectedNameId = id;
            }

            element.classList.add('selected');

            // æª¢æŸ¥æ˜¯å¦å…©é‚Šéƒ½å·²é¸å–
            if (selectedImageId !== null && selectedNameId !== null) {
                checkMatch();
            }
        }

        // æª¢æŸ¥é…å°æ˜¯å¦æ­£ç¢º
        function checkMatch() {
            const imgBoxes = document.querySelectorAll('.img-box');
            const nameBoxes = document.querySelectorAll('.name-box');

            if (selectedImageId === selectedNameId) {
                // é…å°æ­£ç¢º
                const currentMatchedId = selectedImageId;
                
                imgBoxes.forEach(box => {
                    if (box.dataset.id == currentMatchedId) {
                        box.classList.remove('selected');
                        box.classList.add('matched');
                    }
                });
                
                nameBoxes.forEach(box => {
                    if (box.dataset.id == currentMatchedId) {
                        box.classList.remove('selected');
                        box.classList.add('matched');
                    }
                });

                matchedPairs++;
                selectedImageId = null;
                selectedNameId = null;

                // ç¨å¾®å»¶é²å¾Œé¡¯ç¤ºæˆåŠŸç•«é¢
                setTimeout(() => {
                    showSuccessScreen();
                }, 400);

            } else {
                // é…å°éŒ¯èª¤
                document.getElementById('error-message').style.opacity = '1';
                
                // å»¶é²å–æ¶ˆé¸å–ç‹€æ…‹ï¼Œè®“å­¸ç”Ÿçœ‹åˆ°éŒ¯äº†
                setTimeout(() => {
                    imgBoxes.forEach(box => box.classList.remove('selected'));
                    nameBoxes.forEach(box => box.classList.remove('selected'));
                    selectedImageId = null;
                    selectedNameId = null;
                }, 800);
            }
        }

        // é¡¯ç¤ºè§£é–æˆåŠŸç•«é¢
        function showSuccessScreen() {
            document.getElementById('success-page').style.display = 'flex';
            document.getElementById('game-page').style.display = 'none';
            // æ’­æ”¾æ‹æ‰‹è²
            clapSound.currentTime = 0;
            clapSound.play().catch(e => console.log("éŸ³æ•ˆæ’­æ”¾è¢«ç€è¦½å™¨é˜»æ“‹", e));
        }

        // ä¸‹ä¸€ä½å°åµæ¢æŒ‰éˆ•é‚è¼¯
        function nextDetective() {
            // åœæ­¢æ‹æ‰‹è²
            clapSound.pause();
            clapSound.currentTime = 0;

            document.getElementById('success-page').style.display = 'none';
            document.getElementById('game-page').style.display = 'block';

            // æ¯æ¬¡æ­£ç¢ºé…å° 1 ç¨®é³¥é¡å¾Œï¼ŒæŒ‰ä¸‹ä¸‹ä¸€ä½å°±ç›´æ¥é‡æ–°æ´—ç‰Œé–‹æ–°å±€
            initGame();
        }

        // éŠæˆ²å•Ÿå‹•
        window.onload = initGame;

    </script>
</body>
</html>
